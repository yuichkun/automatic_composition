module.exports =
`
(defun stretch (dur pitch &optional rest-p)
  (let '(ret nil) '(pitch-len nil) '(tupletized nil) '(section nil)
    (setf pitch-len (length (flatten pitch)))
    (setf tupletized (gen-repeat pitch-len (/ dur pitch-len)))

    (if (eq rest-p nil)
      (setf section (length tupletized))
      (setf section (gen-integer 0 (- rest-p 1)))
    )

    (setf ret (flatten (gen-pause (mclist (flatten tupletized)) :section section)))
    (return-from stretch ret)
  )
)

(defun line (size low-note high-note &optional tilt)
  (let '(wave nil)
    (if (eq tilt nil)
      (setf tilt 1.0)
    )
    (setf wave (gen-transition 1 10 size tilt))
    (return-from line (vector-to-pitch (list low-note high-note) wave))
  )
)

(defun rnd-pitch (low-num high-num low-note high-note tonality)
  (let ((result nil) (counter (rnd-range low-num high-num)))
    (dotimes (i counter)
      (push (rnd-pick (expand-tonality (list low-note tonality))) result)
    )
    (randomize-octaves  (list low-note high-note) result)
  )
)
(defun artif-harm (pitchs)
  (let '(ret nil)
    (loop for pitch in pitchs do
      (push (chordize (interval-map pitch '(5))) ret)
    )
    (reverse ret)
  )
)

`;
